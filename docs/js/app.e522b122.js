(function(e){function t(t){for(var n,i,s=t[0],c=t[1],l=t[2],d=0,p=[];d<s.length;d++)i=s[d],o[i]&&p.push(o[i][0]),o[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,s=1;s<a.length;s++){var c=a[s];0!==o[c]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},o={app:0},r=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},3750:function(e,t,a){"use strict";var n=a("8acc"),o=a.n(n);o.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],i=a("2877"),s={},c=Object(i["a"])(s,o,r,!1,null,null,null),l=c.exports,u=a("8c4f"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{attrs:{view:"lHh Lpr lFf"}},[a("q-header",{staticClass:"basic",attrs:{elevated:""}},[a("q-toolbar",[a("q-btn",{attrs:{flat:"",dense:"",round:"","aria-label":"Menu",icon:"menu"},on:{click:function(t){e.leftDrawerOpen=!e.leftDrawerOpen}}}),a("q-toolbar-title",[e._v("\n        Doggy PWA\n      ")]),a("div",[e._v("Quasar v"+e._s(e.$q.version))])],1)],1),a("q-drawer",{attrs:{bordered:"","content-class":"bg-grey-2"},model:{value:e.leftDrawerOpen,callback:function(t){e.leftDrawerOpen=t},expression:"leftDrawerOpen"}},[a("q-list",[a("q-item-label",{attrs:{header:""}},[e._v("Navigation")]),a("q-item",{attrs:{to:"/",exact:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"home"}})],1),a("q-item-section",[a("q-item-label",[e._v("Home")])],1)],1),a("q-item",{attrs:{to:"/about",exact:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"info"}})],1),a("q-item-section",[a("q-item-label",[e._v("About")])],1)],1)],1)],1),a("q-page-container",[a("router-view")],1)],1)},p=[],f={name:"LayoutDefault",data:function(){return{leftDrawerOpen:this.$q.platform.is.desktop}}},m=f,g=Object(i["a"])(m,d,p,!1,null,null,null),h=g.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{attrs:{padding:""}},[a("Camera"),a("div",{staticClass:"q-pa-md q-gutter-sm addButton"},[a("q-btn",{attrs:{push:"",color:"primary",icon:"home"},on:{click:e.getMessagingToken}}),a("q-btn",{attrs:{push:"",color:"primary",icon:"add_circle_outline"},on:{click:function(t){return e.$router.push({name:"post"})}}}),a("q-btn",{attrs:{push:"",color:"primary",icon:"camera_alt",disabled:""},on:{click:function(t){return e.$store.dispatch("setCamereModalValue")}}})],1),a("div",{staticClass:"row"},e._l(e.dogs,function(t,n){return a("div",{key:t.id,staticStyle:{padding:"5px"},on:{click:function(a){return e.$router.push({name:"details",params:{id:t.id,dogProp:e.dogs[n]}})}}},[a("q-card",{staticClass:"my-card"},[a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",[a("q-icon",{attrs:{name:"pets"}})],1)],1),a("q-item-section",[a("q-item-label",[e._v(e._s(t.comment))]),a("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.info))])],1)],1),a("img",{attrs:{src:t.url,height:"270"}})],1)],1)}),0)],1)},v=[],q=(a("96cf"),a("3b8d")),y=(a("ac6a"),a("b05d")),w=a("f09f"),_=a("6ab5"),k=a("033f"),C=a("cb32"),Q=a("e208"),x=a("2ea3"),S=a("59ca"),O=a.n(S),P=(a("e71f"),a("741f"),a("588e"),{apiKey:"AIzaSyC-x_P9Jb3VSJpMSx-E6j4dBu4DzkW8tus",authDomain:"simple-pwa-app.firebaseapp.com",databaseURL:"https://simple-pwa-app.firebaseio.com",projectId:"simple-pwa-app",storageBucket:"simple-pwa-app.appspot.com",messagingSenderId:"519093170196",appId:"1:519093170196:web:ff70fef7a04b304f"});O.a.initializeApp(P);var T=O.a.firestore();T.enablePersistence({synchronizeTabs:!0});var M=O.a.storage(),D=O.a.messaging(),A={db:T,storage:M,messaging:D},j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{model:{value:e.display,callback:function(t){e.display=t},expression:"display"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("div",{staticClass:"text-h6"},[e._v("IN DEVELOPMENT")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:function(t){return e.$store.dispatch("setCamereModalValue")}}})],1),a("q-card-section",[a("video",{ref:"video",attrs:{id:"video",width:"100%",height:"100%",autoplay:""}})]),a("q-card-section",{staticStyle:{display:"flex","justify-content":"center"}},[a("q-btn",{attrs:{push:"",color:"primary",round:"",icon:"camera",size:"lg"}})],1)],1)],1)},I=[],E=a("24e8"),U=a("7f67"),$=a("a370"),L=a("4b7e"),R=a("2c91"),N=a("6ac0"),V=a("2f62");n["a"].use(V["a"]);var z=new V["a"].Store({state:{displayCameraModal:!1},mutations:{SET_CAMERA_MODAL_VALUE:function(e){e.displayCameraModal=!e.displayCameraModal}},actions:{setCamereModalValue:function(e){var t=e.commit;t("SET_CAMERA_MODAL_VALUE")}},getters:{displayCameraModal:function(e){return e.displayCameraModal}}}),B=function(e,t,a){var n=new Date,o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];console.log(A.db),A.db.collection("dogs").add({url:e,comment:t,info:"Posted by ".concat(""!=a?a:"Unknown"," on ").concat(o[n.getDay()]),created_at:(new Date).getTime()}).then(xe.go(-1))},F={name:"DetailsPage",components:{Quasar:y["a"],QDialog:E["a"],QCard:w["a"],QCardSection:$["a"],QCardActions:L["a"],QSpace:R["a"],QVideo:N["a"]},directives:{ClosePopup:U["a"]},data:function(){return{mediaStream:null}},mounted:function(){},computed:{display:{get:function(){return z.getters.displayCameraModal},set:function(e){}}},methods:{},destroyed:function(){}},J=F,H=Object(i["a"])(J,j,I,!1,null,null,null),W=H.exports,G=a("bc3a"),K=a.n(G),Y=A.messaging,X=(a("e6d1")({origin:!0}),{name:"PageHome",components:{Quasar:y["a"],QCard:w["a"],QItem:_["a"],QItemSection:k["a"],QAvatar:C["a"],QItemLabel:Q["a"],QPage:x["a"],Camera:W},data:function(){return{dogs:[]}},computed:{displayCameraModal:function(){return z.getters.displayCameraModal}},mounted:function(){var e=this;this.listenTokenRefresh();var t=A.db.collection("dogs").orderBy("created_at","asc");t.get().then(function(t){t.forEach(function(t){e.dogs.push({id:t.id,url:t.data().url,comment:t.data().comment,info:t.data().info})})})},methods:{getMessagingToken:function(){var e=this;Y.getToken().then(function(){var t=Object(q["a"])(regeneratorRuntime.mark(function t(a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=8;break}if(n=window.localStorage.getItem("messagingToken"),console.log("token will be updated",n!=a),n==a){t.next=6;break}return t.next=6,e.saveToken(a);case 6:t.next=10;break;case 8:console.log("No Instance ID token available. Request permission to generate one."),e.notificationsPermisionRequest();case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(e){console.log("An error occurred while retrieving token. ",e)})},notificationsPermisionRequest:function(){var e=this;Y.requestPermission().then(function(){e.getMessagingToken()}).catch(function(e){console.log("Unable to get permission to notify.",e)})},listenTokenRefresh:function(){var e=window.localStorage.getItem("messagingToken");console.log("currentMessageToken",e),e&&Y.onTokenRefresh(function(){Y.getToken().then(function(e){this.saveToken(e)}).catch(function(e){console.log("Unable to retrieve refreshed token ",e)})})},saveToken:function(e){console.log("tokens",e),K.a.post("https://us-central1-simple-pwa-app.cloudfunctions.net/GeneralSubscription",{token:e}).then(function(t){window.localStorage.setItem("messagingToken",e),console.log(t)}).catch(function(e){console.log(e)})}}}),Z=X,ee=(a("3750"),Object(i["a"])(Z,b,v,!1,null,"406c6fc2",null)),te=ee.exports,ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{attrs:{padding:""}},[a("q-card",{staticClass:"my-card"},[a("q-card-section",[a("p",[e._v("\n        Simple App created to understand how to create and build a Progressive Web Application\n        with Vue using Firestore from Google.\n      ")]),a("p",[e._v("\n        Developed by "),a("b",[e._v("Joaquin")])])])],1)],1)},ne=[],oe={name:"PageAbout",components:{Quasar:y["a"],QCard:w["a"],QCardSection:$["a"]}},re=oe,ie=Object(i["a"])(re,ae,ne,!1,null,null,null),se=ie.exports,ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{attrs:{padding:""}},[a("q-card",{},[a("div",{staticClass:"q-pa-md q-gutter-sm",attrs:{id:"card-header"}},[a("q-chip",{attrs:{icon:"plus_one",color:"teal","text-color":"white"}},[e._v("Add a New Dog")]),a("q-btn",{attrs:{push:"",color:"primary",round:"",icon:"refresh"},on:{click:e.refreshImage}})],1),null!==this.dogUrl?a("q-card",{staticClass:"my-card"},[a("q-img",{attrs:{src:e.dogUrl,"spinner-color":"white"}})],1):a("q-img",{staticStyle:{height:"140px"},attrs:{src:"https://cdn.quasar.dev/img/non-existent-image-src.png"},scopedSlots:e._u([{key:"error",fn:function(){return[a("div",{staticClass:"absolute-full flex flex-center bg-negative text-white"},[e._v("Cannot load image")])]},proxy:!0}])}),a("q-card-section",[a("q-form",{staticClass:"q-gutter-md"},[a("q-input",{attrs:{filled:"",label:"Name",hint:"Your name"},model:{value:e.author,callback:function(t){e.author=t},expression:"author"}}),a("q-input",{attrs:{filled:"",label:"Title",hint:"Dog's title"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),a("div",[a("q-btn",{attrs:{label:"POST A DOG","icon-right":"pets",type:"submit",color:"primary"},on:{click:e.post}}),a("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Reset",type:"reset",color:"primary",flat:""}})],1)],1)],1)],1)],1)},le=[],ue=a("0378"),de=a("27f9"),pe=a("068f"),fe=a("b047"),me=function(e){return K.a.get(e).then(function(e){return e.data}).catch(function(e){console.log(e)})},ge={name:"PostPage",components:{Quasar:y["a"],QForm:ue["a"],QInput:de["a"],QCard:w["a"],QCardSection:$["a"],QImg:pe["a"],QChip:fe["a"]},props:{pictureUrl:{default:"",type:String}},data:function(){return{dogUrl:null,title:"",author:""}},mounted:function(){var e=this;""!==this.pictureUrl?this.dogUrl=this.pictureUrl:me("https://dog.ceo/api/breed/appenzeller/images/random").then(function(t){t.status&&(e.dogUrl=t.message)}).catch(function(t){e.dogUrl=null})},methods:{post:function(){B(this.dogUrl,this.title,this.author)},refreshImage:function(){var e=this;me("https://dog.ceo/api/breed/appenzeller/images/random").then(function(t){t.status&&(e.dogUrl=t.message)}).catch(function(t){e.dogUrl=null})}}},he=ge,be=(a("67b8"),Object(i["a"])(he,ce,le,!1,null,"dbbb787e",null)),ve=be.exports,qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{attrs:{padding:""}},[a("q-card",{staticClass:"my-card"},[a("img",{attrs:{src:e.dog.url}}),a("q-list",[e.dog.comment?a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{color:"red",name:"title"}})],1),a("q-item-section",[a("q-item-label",[e._v(e._s(e.dog.comment))])],1)],1):e._e(),e.dog.info?a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{color:"primary",name:"description"}})],1),a("q-item-section",[a("q-item-label",[e._v(e._s(e.dog.info))])],1)],1):e._e()],1)],1),a("q-btn",{staticClass:"full-width q-mt-md",attrs:{color:"teal",icon:"keyboard_backspace"},on:{click:function(t){return e.$router.push({name:"home"})}}})],1)},ye=[],we=a("497d"),_e={name:"DetailsPage",components:{Quasar:y["a"],QCard:w["a"],QCardSection:$["a"],QImg:pe["a"],QList:we["a"]},props:{dogProp:{type:Object,required:!0}},data:function(){return{dog:{}}},mounted:function(){var e=this;if(this.dogProp)this.dog=this.dogProp;else{var t=this.$route.params.id;A.db.doc("dogs/".concat(t)).get().then(function(t){t.exists?e.dog=t.data():console.log("no document found")}).catch(function(e){console.log("error getting document",e)})}}},ke=_e,Ce=Object(i["a"])(ke,qe,ye,!1,null,null,null),Qe=Ce.exports;n["a"].use(u["a"]);var xe=new u["a"]({routes:[{path:"/",component:h,children:[{path:"",name:"home",component:te},{path:"/details/:id",name:"details",props:!0,component:Qe},{path:"/post",name:"post",props:!0,component:ve},{path:"/about",name:"about",component:se}]}]}),Se=a("9483");Object(Se["a"])("".concat("/","firebase-messaging-sw.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});a("a4ac"),a("7d6e"),a("e54f");var Oe=a("4d5a"),Pe=a("9898"),Te=a("f2cc"),Me=a("c7a0"),De=a("65c6"),Ae=a("6ac5"),je=a("9c40"),Ie=a("0016");n["a"].use(y["a"],{config:{},components:{QLayout:Oe["a"],QHeader:Pe["a"],QDrawer:Te["a"],QPageContainer:Me["a"],QPage:x["a"],QToolbar:De["a"],QToolbarTitle:Ae["a"],QBtn:je["a"],QIcon:Ie["a"],QList:we["a"],QItem:_["a"],QItemSection:k["a"],QItemLabel:Q["a"]},directives:{},plugins:{}}),n["a"].config.productionTip=!1,new n["a"]({router:xe,store:z,render:function(e){return e(l)}}).$mount("#app")},"67b8":function(e,t,a){"use strict";var n=a("f273"),o=a.n(n);o.a},"8acc":function(e,t,a){},a4ac:function(e,t,a){},f273:function(e,t,a){}});
//# sourceMappingURL=app.e522b122.js.map